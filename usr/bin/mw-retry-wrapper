#!/bin/bash

do_it() {
   "$@"
   exit_code=$?
   return $exit_code
}

for retry_counter in $(seq 1 5) ; do
   do_it "$@"
   if [ $? -eq 0 ] ; then
      ## Success. Exit success.
      exit 0
   fi
   ## Failed. Wait and try again.
   sleep 5
done

exit $exit_code
