#!/bin/bash

## TODO: unfinished

#set -x
set -e

cd ..
source wiki-config

## Not required for public wiki.
#./login

wiki_target="https://www.whonix.org/w/"

all_pages=$(curl "$wiki_target/api.php?action=query&format=json&list=allpages&aplimit=500&continue=")

#parsed_all_pages=$(echo "$all_pages" | jq -r ".query.allpages[] | {title: .title}| .title")
parsed_all_pages=$(echo "$all_pages" | jq -r ".query.allpages[] | .title")

for item_from_all_pages in "$parsed_all_pages" ; do
   echo "item_from_all_pages: '$item_from_all_pages'"
done

#https://www.whonix.org/w/api.php?action=query&list=allpages&apnamespace=0&format=json&aplimit=500&continue=
